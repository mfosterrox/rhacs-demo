= RHACS Demo Environment Setup

== Getting Started

=== Quick Start (with auto-populated password)

[source,bash]
----
if [ -f install.sh ]; then git pull && ./install.sh {acs_portal_password}; elif [ -d rhacs-demo ]; then cd rhacs-demo && git pull && ./install.sh {acs_portal_password}; else git clone https://github.com/mfosterrox/rhacs-demo.git && cd rhacs-demo && ./install.sh {acs_portal_password}; fi
----

The `{acs_portal_password}` placeholder will be automatically replaced with your actual password.

=== Alternative: Using environment variables

Clone and run without arguments (requires variables in `~/.bashrc` or environment):

[source,bash]
----
if [ -f install.sh ]; then git pull && ./install.sh; elif [ -d rhacs-demo ]; then cd rhacs-demo && git pull && ./install.sh; else git clone https://github.com/mfosterrox/rhacs-demo.git && cd rhacs-demo && ./install.sh; fi
----

== Prerequisites

The script checks for required variables in this order:

1. Command-line arguments (highest priority)
2. Current environment variables
3. Variables defined in `~/.bashrc`
4. Auto-detection from cluster (for `ROX_CENTRAL_URL`)

=== Required Variables

* `ROX_PASSWORD` - RHACS Central admin password (can be passed as argument: `./install.sh YOUR_PASSWORD`)
* `ROX_CENTRAL_URL` - RHACS Central URL (auto-detected from cluster route if not provided)

Optional variables:

* `RHACS_NAMESPACE` - Namespace where RHACS is installed (default: `stackrox`)
* `RHACS_ROUTE_NAME` - Name of the RHACS route (default: `central`)
* `RHACS_VERSION` - Optional: Target RHACS version

== What It Does

The installation script will:

. Verify all required variables and credentials are configured
. Verify RHACS installation including secured cluster services
. Ensure the RHACS route is encrypted with TLS
. Check and update RHACS to the latest stable version if needed
. Install and configure the Red Hat Compliance Operator
. Deploy demo applications for testing
. Configure RHACS settings (telemetry, metrics collection)
. Set up automated compliance scan schedules
. Configure monitoring with certificate-based authentication for Prometheus

== Setup Scripts

The following scripts are executed in order:

. `01-verify-rhacs-install.sh` - Verifies RHACS installation and version
. `02-compliance-operator-install.sh` - Installs Red Hat Compliance Operator
. `03-deploy-applications.sh` - Deploys demo applications
. `04-configure-rhacs-settings.sh` - Configures RHACS API settings
. `05-setup-co-scan-schedule.sh` - Sets up automated compliance scanning
. `06-setup-monitoring.sh` - Configures RHACS monitoring with TLS certificates

== Monitoring Configuration

The monitoring setup provides:

* **Certificate-based authentication** for Prometheus to access RHACS metrics
* **Custom metrics** for image vulnerabilities and policy violations
* **Read-only access** via declarative RBAC configuration
* **Secure TLS** communication with 365-day certificate validity

For detailed monitoring documentation, see link:monitoring/README.md[monitoring/README.md]
